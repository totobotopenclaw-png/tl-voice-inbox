# TL Voice Inbox Environment Configuration
# Copy this file to .env and customize for your setup

# ============================================
# Server Configuration
# ============================================
PORT=3000
HOST=0.0.0.0
NODE_ENV=production

# ============================================
# Data & Database
# ============================================
DATA_DIR=./data
DB_PATH=./data/tl-voice-inbox.db

# Transcript retention (days) - auto-deleted after this period
TRANSCRIPT_TTL_DAYS=14

# Audio file cleanup (keep or delete after processing)
# options: keep, delete, ttl
AUDIO_RETENTION=ttl
AUDIO_TTL_HOURS=24

# ============================================
# External Binaries (set full paths if not in PATH)
# ============================================
# Windows examples (uncomment and set your paths):
# WHISPER_CLI_PATH=C:\tools\whisper\whisper-cli.exe
# LLAMA_SERVER_PATH=C:\tools\llama\llama-server.exe

# Linux/macOS examples:
# WHISPER_CLI_PATH=/usr/local/bin/whisper-cli
# LLAMA_SERVER_PATH=/usr/local/bin/llama-server

# ============================================
# STT (Speech-to-Text) Configuration
# ============================================
# Model size: tiny, base, small, medium, large
WHISPER_MODEL=tiny
WHISPER_LANGUAGE=es
WHISPER_THREADS=4

# ============================================
# LLM Configuration (Milestone 6+)
# ============================================
LLM_ENABLED=true
LLM_MODEL=./data/models/llama-2-7b.Q4_K_M.gguf
LLM_PORT=8081
LLM_CONTEXT_SIZE=4096
LLM_THREADS=4
LLM_BATCH_SIZE=512

# Timeout for LLM requests (ms)
LLM_TIMEOUT_MS=120000

# ============================================
# Job Queue Configuration
# ============================================
# Number of concurrent workers
WORKER_CONCURRENCY=2

# How often to poll for new jobs (ms)
JOB_POLL_INTERVAL_MS=3000

# Max retries for failed jobs
JOB_MAX_RETRIES=3

# ============================================
# Epic Matching Configuration
# ============================================
# Confidence threshold for needs_review (0.0 - 1.0)
# If top_candidate - second_candidate < threshold, mark needs_review
EPIC_MATCH_THRESHOLD=0.2

# Max candidates to return
EPIC_MAX_CANDIDATES=3

# ============================================
# Web Push Configuration (Milestone 8+)
# ============================================
# Generate VAPID keys: npx web-push generate-vapid-keys
# VAPID_PUBLIC_KEY=your_public_key_here
# VAPID_PRIVATE_KEY=your_private_key_here
# VAPID_SUBJECT=mailto:your@email.com

# ============================================
# Notification Settings
# ============================================
# Days before deadline to send "soon" notification
DEADLINE_SOON_DAYS=1

# ============================================
# Logging
# ============================================
LOG_LEVEL=info
# options: debug, info, warn, error

# Log to file (in addition to console)
LOG_TO_FILE=true
LOG_FILE=./data/logs/app.log

# ============================================
# Development Settings (ignore for production)
# ============================================
# DEBUG_MODE=false
# MOCK_LLM=false
# MOCK_STT=false
